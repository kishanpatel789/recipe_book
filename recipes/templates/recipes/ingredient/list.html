{% extends "recipes/base.html" %}

{% block content %}
<h1>Ingredients</h1>

<div>
    <a href="{% url 'ingredient_create' %}">
     + Create Ingredient
    </a>
</div>

{% if ingredients %}
<table>
  <thead>
    <tr>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody hx-target="closest tr" hx-swap="outerHTML">
    {% for ingr in ingredients %}
    <tr>
      <td>{{ ingr.name }}</td>
      <td>
        <button hx-get="{% url 'htmx_ingredient_edit' ingr.id %}"
                >
          Edit
        </button>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>



{% else %}
<p class="text-gray-600 mt-4">No ingredients to show.</p>
{% endif %}

<div>
    <ul>
        {% for ingr in ingredients %}

        <li>
            <!-- Ingredient name -->
            <span class="text-gray-800 me-4">{{ ingr.name }}</span>

            <!-- Actions -->
            <div class="flex items-center gap-2">
                <a href="{% url 'ingredient_edit' ingr.id %}"
                   class="px-3 py-1 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
                    Edit
                </a>

                <form action="{% url 'ingredient_delete' ingr.id %}" method="POST"
                                                                     onsubmit="return confirm('Are you sure you want to delete {{ ingr.name }}?');">
                    {% csrf_token %}
                    <button type="submit"
                            class="px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 transition">
                        Delete
                    </button>
                </form>
            </div>
        </li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
